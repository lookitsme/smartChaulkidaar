{% extends 'map/base.html' %}

{% block content %}

<div id ="map" style="height: 600px; width: 600px;"></div>
{{stations | json_script:"stations_json"}}
<script>
    var map =L.map('map').setView([27.691, 85.315], 12);
    L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 25,
    attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
    }).addTo(map);

//     let stations = JSON.parse(document.getElementById('stations_json').textContent)

//     stations.forEach(station => {
//     L.marker([station.latitude, station.longitude]).addTo(map)
// })
    map.on('click', (event) =>{
        L.marker([event.latlng.lat, event.latlng.lng]).addTo(map)
    })
</script>

{% endblock %}